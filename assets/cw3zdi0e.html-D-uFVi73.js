import{_ as i,c as a,a as n,o as l}from"./app-CS9K37Kg.js";const h={};function e(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<p>使用<code>sentiment-analysis</code>模型，可以对文本进行情感分析。</p><p>完整代码如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># !/Users/matias/.pyenv/shims/python3</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># coding=utf-8</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Author: matiastang</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Date: 2023-12-13 11:32:41</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LastEditors: matiastang</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LastEditTime: 2024-04-03 17:21:26</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">FilePath: /huggingface-learning/test/sentiment-analysis.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Description: sentiment-analysis 情绪分析测试</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> os</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">os.environ[</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;HF_ENDPOINT&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hf-mirror.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 注意os.environ得在import huggingface库相关语句之前执行。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transformers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipeline</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 使用情绪分析流水线</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置模型管道</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">classifier</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pipeline</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;sentiment-analysis&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 模型管道加载完成</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># res = classifier(&#39;We are very happy to introduce pipeline to the transformers repository.&#39;)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># res = classifier(&#39;哎！这天什么时候晴哦。&#39;)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># res = classifier(&#39;A股什么时候才能走出熊市。&#39;)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># [{&#39;label&#39;: &#39;NEGATIVE&#39;, &#39;score&#39;: 0.9339227676391602}]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># res = classifier(&#39;谁知道今晚吃什么好吃的啊？&#39;)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># [{&#39;label&#39;: &#39;NEGATIVE&#39;, &#39;score&#39;: 0.9533189535140991}]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># res = classifier([&#39;Who knows what’s good for dinner tonight&#39;, &#39;Who won the lottery? I want to invite you to dinner.&#39;])</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># [{&#39;label&#39;: &#39;POSITIVE&#39;, &#39;score&#39;: 0.9993970394134521}, {&#39;label&#39;: &#39;POSITIVE&#39;, &#39;score&#39;: 0.9985677003860474}]</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># questions = [&#39;Who knows what’s good for dinner tonight&#39;, &#39;Who won the lottery? I want to invite you to dinner.&#39;]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">questions</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">你感冒了吗？</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">, </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">你知道我感冒了，还给我吃冷的？</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">res</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> classifier</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">questions</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i, value in enumerate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    question</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> questions[i]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    label</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> value[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">label</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    score</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> value[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">score</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    text</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">正面</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> if</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> label</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ==</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">POSITIVE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> else</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">负面</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    print</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">f</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;信息：{question} 是{text}的概率为{score}&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果本地没有对应模型，则会下载模型文件，下载过程如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> model</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Transformers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v4.22.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> has</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> been</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> updated.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Migrating</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> your</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> old</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cache.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> one-time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> only</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> operation.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> You</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> can</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> interrupt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> resume</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> migration</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> later</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> by</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> calling</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> \`transformers.utils.move_cache</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">0it</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> [00:00, ?it/s]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> model was supplied, defaulted to distilbert-base-uncased-finetuned-sst-2-english and revision af0f99b (https://huggingface.co/distilbert-base-uncased-finetuned-sst-2-english).</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Using</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a pipeline without specifying a model name and revision in production is not recommended.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">config.json:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 100%</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">███████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 629/629</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> [00:00&lt;00:00, 1.16MB/s]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">model.safetensors:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 100%</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">███████████████████████████████████████████████████████████████</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 268M/268M</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> [02:21&lt;00:00, 1.89MB/s]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tokenizer_config.json:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 100%</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">████████████████████████████████████████████████████████████</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 48.0/48.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> [00:00&lt;00:00, 286kB/s]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vocab.txt:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 100%</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">████████████████████████████████████████████████████████████████████████</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 232k/232k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> [00:00&lt;00:00, 714kB/s]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5)]))}const p=i(h,[["render",e],["__file","cw3zdi0e.html.vue"]]),r=JSON.parse('{"path":"/llm/hugginface/cw3zdi0e.html","title":"使用sentiment-analysis情绪分析测试","lang":"zh-CN","frontmatter":{"title":"使用sentiment-analysis情绪分析测试","createTime":"2025/02/07 17:33:47","permalink":"/llm/hugginface/cw3zdi0e.html","watermark":true},"headers":[],"readingTime":{"minutes":1.59,"words":477},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/llm/huggingface/使用sentiment-analysis情绪分析测试.md","bulletin":false}');export{p as comp,r as data};
