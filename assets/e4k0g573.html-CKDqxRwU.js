import{_ as s,c as e,a as t,o as a}from"./app-CS9K37Kg.js";const d={};function h(l,i){return a(),e("div",null,i[0]||(i[0]=[t(`<p>使用git管理代码时，时常有这么一种情况：</p><ul><li>代码仓库中有一个分支，这个分支上有很多提交，这些提交是按顺序提交的，比如：<code>a -&gt; b -&gt; c -&gt; d -&gt; e</code></li><li>现在有一个新的分支，这个分支上有一个提交，这个提交是提交在<code>c</code>这个提交之后，比如：<code>c -&gt; f -&gt; h</code></li><li>现在想把<code>h</code>这个提交合并到<code>a -&gt; b -&gt; c -&gt; d -&gt; e</code>这个分支上，但是不想把<code>c -&gt; d -&gt; e</code>这些提交合并过来，只想要<code>h</code>这个提交，这时候就可以使用<code>cherry-pick</code>命令</li></ul><h2 id="cherry-pick命令" tabindex="-1"><a class="header-anchor" href="#cherry-pick命令"><span>cherry-pick命令</span></a></h2><p><code>cherry-pick</code>命令可以将一个分支上的某个提交合并到当前分支上，使用方法如下：</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-has</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中，<code>&lt;commit-hash&gt;</code>是要合并的提交的哈希值，可以通过<code>git log</code>命令查看提交的哈希值。</p><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h2><h3 id="合并最后一次提交" tabindex="-1"><a class="header-anchor" href="#合并最后一次提交"><span>合并最后一次提交</span></a></h3><p>假设现在有一个仓库，其中有两个分支：<code>master</code>和<code>feature</code>，<code>master</code>分支上有提交<code>a -&gt; b -&gt; c -&gt; d -&gt; e</code>，<code>feature</code>分支上有一个提交<code>c -&gt; f -&gt; h</code>，现在想把<code>h</code>这个提交合并到<code>master</code>分支上，但是不想把<code>c -&gt; d -&gt; e</code>这些提交合并过来，操作步骤如下：</p><ol><li>切换到<code>master</code>分支</li></ol><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>查看<code>feature</code>分支上的提交哈希值</li></ol><p>查看最后一次提交</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> feature</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看全部提交</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> feature</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>使用<code>cherry-pick</code>命令将<code>h</code>这个提交合并到<code>master</code>分支上</li></ol><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-has</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">h</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中，<code>&lt;commit-hash&gt;</code>是<code>h</code>这个提交的哈希值。</p><ol start="4"><li>解决可能出现的冲突</li></ol><p>在合并过程中，可能会出现冲突，需要手动解决冲突，然后使用<code>git add</code>命令将解决后的文件添加到暂存区，再使用<code>git cherry-pick --continue</code>命令继续合并。</p><ol start="5"><li>完成合并</li></ol><p>合并完成后，可以使用<code>git log</code>命令查看合并后的提交记录，确认合并是否成功。</p><h3 id="合并多个提交" tabindex="-1"><a class="header-anchor" href="#合并多个提交"><span>合并多个提交</span></a></h3><p>如果需要合并多笔提交，则有下面几种方式</p><h4 id="合并多个连续的提交" tabindex="-1"><a class="header-anchor" href="#合并多个连续的提交"><span>合并多个连续的提交</span></a></h4><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-hash</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">1&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-hash</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">2&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其中，<code>&lt;commit-hash1&gt;</code>和<code>&lt;commit-hash2&gt;</code>是要合并的提交的哈希值，<code>&lt;commit-hash1&gt;</code>和<code>&lt;commit-hash2&gt;</code>之间是连续的提交。</p><h4 id="依次-cherry-pick-多条提交" tabindex="-1"><a class="header-anchor" href="#依次-cherry-pick-多条提交"><span>依次 cherry-pick 多条提交</span></a></h4><p>如果你只想 cherry-pick 某几条（比如最近3条中的第1和第3条），可以手动操作：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a3cdef</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> c1a111</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-git-rev-list-自动取最近-n-条提交" tabindex="-1"><a class="header-anchor" href="#使用-git-rev-list-自动取最近-n-条提交"><span>使用 git rev-list 自动取最近 N 条提交</span></a></h2><p>比如你想 cherry-pick master 最近 3 次提交：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zxjt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cherry-pick</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rev-list</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --reverse</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --max-count=3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>--reverse</code> 确保顺序从老到新。</li><li><code>--max-count=3</code> 取最近 3 条。</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><table><thead><tr><th>场景</th><th>推荐方法</th><th>命令示例</th></tr></thead><tbody><tr><td>cherry-pick 最近 N 条连续提交</td><td>方法一</td><td><code>git cherry-pick old_commit^..new_commit</code></td></tr><tr><td>cherry-pick 最近 N 条中某几条</td><td>方法二</td><td>多次手动 <code>git cherry-pick &lt;commit&gt;</code></td></tr><tr><td>批量自动 cherry-pick 最近 N 条提交</td><td>方法三</td><td><code>git cherry-pick $(git rev-list --reverse --max-count=3 master)</code></td></tr></tbody></table>`,37)]))}const c=s(d,[["render",h],["__file","e4k0g573.html.vue"]]),r=JSON.parse('{"path":"/git/e4k0g573.html","title":"cherry-pick合并","lang":"zh-CN","frontmatter":{"title":"cherry-pick合并","createTime":"2025/07/07 17:16:48","permalink":"/git/e4k0g573.html","watermark":true},"headers":[],"readingTime":{"minutes":2.67,"words":801},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/git/cherry-pick合并.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"05b1be","sort":10005,"name":"git"}],"bulletin":false}');export{c as comp,r as data};
