import{_ as i,c as e,a,o as t}from"./app-CS9K37Kg.js";const n={};function l(d,s){return t(),e("div",null,s[0]||(s[0]=[a(`<p>在<code>Vue3</code>项目中引入<code>primevue</code>组件库时，遇到如下错误：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">✘</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ERROR] No matching </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> in</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node_modules/.pnpm/vue@3.4.34_typescript@5.5.4/node_modules/vue/dist/vue.runtime.esm-bundler.js</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> for</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> import</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">useId</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    node_modules/.pnpm/@primevue+core@4.3.1_vue@3.4.34_typescript@5.5.4_/node_modules/@primevue/core/useattrselector/index.mjs:1:9:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> │</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> useId</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> }</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vue</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ╵</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          ~~~~~</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/Users/matias/matias/KK/memoir/memoir-web/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:1472</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  let</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> new</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">text</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">              ^</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Error:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Build</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> error:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">node_modules/.pnpm/@primevue+core@4.3.1_vue@3.4.34_typescript@5.5.4_/node_modules/@primevue/core/useattrselector/index.mjs:1:9:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ERROR:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> No</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matching</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> export</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node_modules/.pnpm/vue@3.4.34_typescript@5.5.4/node_modules/vue/dist/vue.runtime.esm-bundler.js</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> import</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">useId</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> failureErrorWithLog</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (/Users/matias/matias/KK/memoir/memoir-web/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:1472:15)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/KK/memoir/memoir-web/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:945:25</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/KK/memoir/memoir-web/node_modules/.pnpm/esbuild@0.21.5/node_modules/esbuild/lib/main.js:1353:9</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> process.processTicksAndRejections</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (node:internal/process/task_queues:95:5) </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  errors:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Getter/Setter],</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  warnings:</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Getter/Setter]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Node.js</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v20.11.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>虽然官方发布说明中 <code>PrimeVue 4.3.1</code> 还未引入 <code>useId</code>，但实际上 它在 <code>@primevue/core</code> 中已经偷偷引入了，而 <code>@primevue/core</code> 是 PrimeVue 从 <code>4.3.0</code> 开始的新模块化拆包方式的一部分。</p><p>所以根本原因来自：<code>@primevue/core/useattrselector/index.mjs</code></p><p>所以即使你安装的是 <code>primevue@4.3.1</code>，它依赖的 <code>@primevue/core</code> 已经使用了：</p><div class="language-ts line-numbers-mode" data-ext="ts" data-title="ts"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> useId</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vue</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>而 <code>Vue 3.4.34</code>（甚至未来 <code>3.5.x</code>）根本没有导出 <code>useId</code>，因此不管你用 <code>PrimeVue 4.3.1/4.3.2/4.3.4</code>只要它依赖了 <code>@primevue/core</code>，就一定会报错。</p><h2 id="彻底解决方案" tabindex="-1"><a class="header-anchor" href="#彻底解决方案"><span>彻底解决方案</span></a></h2><h3 id="方案一-降级到-primevue-4-2-0-最后一个不使用-primevue-core-的版本" tabindex="-1"><a class="header-anchor" href="#方案一-降级到-primevue-4-2-0-最后一个不使用-primevue-core-的版本"><span>方案一：降级到 <code>primevue@4.2.0</code>（最后一个不使用 @primevue/core 的版本）</span></a></h3><p>执行：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> primevue@4.2.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>PrimeVue 在 4.3.0 才引入 <code>@primevue/core</code> 和 <code>useId</code>，<code>4.2.0</code> 是 安全、稳定、兼容 <code>Vue 3.4.34</code> 的版本。</p><h3 id="方案二-不推荐-手动-patch-primevue-core" tabindex="-1"><a class="header-anchor" href="#方案二-不推荐-手动-patch-primevue-core"><span>方案二（不推荐）：手动 patch @primevue/core</span></a></h3><p>你可以用 <code>patch-package</code> 修改它的 useId 引用为自定义函数或注释掉，但这只是临时 workaround：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -D</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> patch-package</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>然后在 <code>node_modules/@primevue/core/useattrselector/index.mjs</code> 中把：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">import</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> useId</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> }</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">vue</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>替换为：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">const</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> useId</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> () =&gt; Math.random().toString(36).substring(2, 10);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>执行：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> patch-package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @primevue/core</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>但由于 @primevue/core 是不断升级中的内部包，这种方法未来容易失效，不推荐用于长期项目。</p><h2 id="方案总结" tabindex="-1"><a class="header-anchor" href="#方案总结"><span>方案总结</span></a></h2><table><thead><tr><th>方案</th><th>稳定性</th><th>推荐程度</th></tr></thead><tbody><tr><td>使用 primevue@4.2.0</td><td>稳定</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td>手动 patch @primevue/core</td><td>临时</td><td>⭐⭐</td></tr><tr><td>等待官方发布兼容版本</td><td>不可控</td><td>⭐</td></tr></tbody></table><h2 id="primevue-与-useid-的状态-截至-2025年5月" tabindex="-1"><a class="header-anchor" href="#primevue-与-useid-的状态-截至-2025年5月"><span>PrimeVue 与 useId 的状态（截至 2025年5月）</span></a></h2><table><thead><tr><th>包名</th><th>是否使用 useId</th></tr></thead><tbody><tr><td>primevue@4.2.x</td><td>❌ 安全</td></tr><tr><td>primevue@4.3.x</td><td>✅ 不兼容 Vue 3.4.34</td></tr><tr><td>@primevue/core</td><td>✅ 关键问题源头</td></tr></tbody></table>`,26)]))}const p=i(n,[["render",l],["__file","a6mx35b5.html.vue"]]),r=JSON.parse('{"path":"/vue/a6mx35b5.html","title":"primevue 组件库导入问题","lang":"zh-CN","frontmatter":{"title":"primevue 组件库导入问题","createTime":"2025/05/21 14:44:12","permalink":"/vue/a6mx35b5.html","watermark":true},"headers":[],"readingTime":{"minutes":1.67,"words":502},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/vue/primevue组件库导入问题.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"67cf80","sort":10055,"name":"vue"}],"bulletin":false}');export{p as comp,r as data};
