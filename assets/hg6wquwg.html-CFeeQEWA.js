import{_ as s,c as a,a as e,o as l}from"./app-CS9K37Kg.js";const t={};function n(h,i){return l(),a("div",null,i[0]||(i[0]=[e('<p>混杂模式（Promiscuous Mode）是一种网络接口模式，开启后，网卡可以接收所有经过的流量，即使这些数据包的目标地址不是自己。</p><h2 id="混杂模式的主要特点" tabindex="-1"><a class="header-anchor" href="#混杂模式的主要特点"><span>混杂模式的主要特点</span></a></h2><h3 id="接收所有数据包" tabindex="-1"><a class="header-anchor" href="#接收所有数据包"><span>接收所有数据包</span></a></h3><ul><li>默认模式下，网卡只接收发往自己 MAC 地址的流量（以及广播/多播）。</li><li>开启混杂模式后，网卡可以接收所有经过的流量，不论目标地址是谁。</li></ul><h3 id="适用于流量监控和抓包" tabindex="-1"><a class="header-anchor" href="#适用于流量监控和抓包"><span>适用于流量监控和抓包</span></a></h3><ul><li>开启混杂模式后，主机可以捕获整个网络的数据包，适用于：</li><li>Wireshark、tcpdump 等抓包工具</li><li>网络流量监控</li><li>入侵检测系统（IDS）</li></ul><h3 id="适用于桥接模式或转发流量" tabindex="-1"><a class="header-anchor" href="#适用于桥接模式或转发流量"><span>适用于桥接模式或转发流量</span></a></h3><ul><li>在 Linux 桥接网络（bridge） 中，桥接设备可能需要混杂模式来转发非本机数据包。</li><li>在 虚拟机（KVM、VMware）或 Docker Macvlan 网络 中，有时候需要混杂模式让宿主机或其他设备正常通信。</li></ul><h3 id="可能带来安全风险" tabindex="-1"><a class="header-anchor" href="#可能带来安全风险"><span>可能带来安全风险</span></a></h3><ul><li>网络嗅探风险：黑客可以在局域网中开启混杂模式来窃听未加密数据。</li><li>性能开销：开启后，网卡会处理更多无关数据，可能增加 CPU 负担。</li></ul><h2 id="如何开启和关闭混杂模式" tabindex="-1"><a class="header-anchor" href="#如何开启和关闭混杂模式"><span>如何开启和关闭混杂模式？</span></a></h2><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h3><p>查看混杂模式状态</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果看到 PROMISC 说明已经开启混杂模式。</p><p>开启混杂模式</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> promisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>关闭混杂模式</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> link</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> promisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> off</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="场景" tabindex="-1"><a class="header-anchor" href="#场景"><span>场景</span></a></h2><p>需要开启混杂模式的场景：</p><ul><li>流量抓包、网络监控（Wireshark、tcpdump）</li><li>网桥（Bridge）模式（虚拟机、Docker 网络）</li><li>入侵检测系统（IDS）</li><li>共享网络设备（如 VPN 网关、流量转发代理）</li></ul><p>不建议开启混杂模式的情况：</p><ul><li>普通日常使用（会增加 CPU 负担）</li><li>公共网络环境，可能引发安全风险</li><li>可能导致性能问题，特别是在高流量环境中</li></ul><h2 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h2><p>混杂模式允许网卡接收所有流量，适用于流量分析、网络监控、桥接转发等场景，但开启后可能带来安全隐患和性能开销，需要根据具体需求谨慎使用。</p>',26)]))}const d=s(t,[["render",n],["__file","hg6wquwg.html.vue"]]),p=JSON.parse('{"path":"/nas/hg6wquwg.html","title":"网络混杂模式","lang":"zh-CN","frontmatter":{"title":"网络混杂模式","createTime":"2025/02/26 17:22:14","permalink":"/nas/hg6wquwg.html","watermark":true},"headers":[],"readingTime":{"minutes":2,"words":599},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/nas/网络混杂模式.md","bulletin":false}');export{d as comp,p as data};
