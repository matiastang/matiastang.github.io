import{_ as e,c as k,a as t,b as i,d as a,e as l,f as h,r as p,o as d}from"./app-CS9K37Kg.js";const r={};function g(A,s){const n=p("RouteLink");return d(),k("div",null,[s[12]||(s[12]=t(`<p>Git Hooks 是一种强大的机制，用于在 Git 的特定事件发生时触发自定义脚本。通过 Git Hooks，可以在提交代码、合并分支或推送代码等操作之前或之后运行特定的脚本，来实现自动化的工作流、质量检查或其他定制需求。</p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><p>Git Hooks 位于每个 Git 仓库的 <code>.git/hooks</code> 目录中。在这个目录中，你可以找到一些示例脚本，它们都以 <code>.sample</code> 结尾。这些示例脚本可以用于了解 Git Hooks 的基本结构和用法。</p><p>要启用一个 Git Hook，你需要将 <code>.sample</code> 后缀去掉。例如，要启用 <code>pre-commit</code> Hook，你需要将 <code>pre-commit.sample</code> 重命名为 <code>pre-commit</code>。一般我们会使用其他的三方库来实现一些常用的<code>hooks</code>，如：<a href="https://github.com/pre-commit/pre-commit" target="_blank" rel="noopener noreferrer">pre-commit</a>。</p><p>我们来看一下示例文件里面的内容：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .git/hooks</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ll</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 120</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   478B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> applypatch-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   896B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   4.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fsmonitor-watchman.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   189B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> post-update.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   424B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-applypatch.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   416B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-merge-commit.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.3K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-push.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   4.8K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-rebase.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   544B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-receive.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.5K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> prepare-commit-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   2.7K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push-to-checkout.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   3.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update.sample</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看一下<code>pre-commit.sample</code> 文件的内容：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit.sample</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/sh</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># An example hook script to verify what is about to be committed.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Called by &quot;git commit&quot; with no arguments.  The hook should</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># exit with non-zero status after issuing an appropriate message if</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># it wants to stop the commit.</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># To enable this hook, rename this file to &quot;pre-commit&quot;.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rev-parse</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --verify</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/dev/null</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> 2&gt;&amp;1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">then</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        against</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HEAD</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">else</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # Initial commit: diff against an empty tree object</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        against</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hash-object</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tree</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># If you want to allow non-ASCII filenames set this variable to true.</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">allownonascii</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --type=bool</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hooks.allownonascii</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Redirect output to stderr.</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exec</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> 1&gt;&amp;2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Cross platform projects tend to avoid non-ASCII filenames; prevent</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># them from being added to the repository. We exploit the fact that the</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># printable range starts at the space character and ends with tilde.</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$allownonascii</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # Note that the use of brackets around a tr range is ok here, (it&#39;s</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # even required, for portability to Solaris 10&#39;s /usr/bin/tr), since</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # the square bracket bytes happen to fall in the designated range.</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        test</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> $(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> diff</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --cached</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --name-only</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --diff-filter=A</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -z</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $against</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">          LC_ALL</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">C</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> tr</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">[ -~]\\0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> wc</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> !=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">then</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        cat</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;&lt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">\\EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Error: Attempt to add a non-ASCII file name.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">This can cause problems if you want to work with people on other platforms.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">To be portable it is advisable to rename the file.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">If you know what you are doing you can disable this check using:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  git config hooks.allownonascii true</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">EOF</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        exit 1</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"># If there are whitespace errors, print the offending file names and fail.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">exec git diff-index --check --cached $against --</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编写<code>pre-commit</code>文件，即可实现<code>commit</code>实现一些自动化的功能。</p><h2 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h2><h3 id="python项目中添加git-commit是对-py文件自动校验、自动修复、头文件自动整理、依赖文件自动生成。" tabindex="-1"><a class="header-anchor" href="#python项目中添加git-commit是对-py文件自动校验、自动修复、头文件自动整理、依赖文件自动生成。"><span>Python项目中添加<code>git commit</code>是对<code>.py</code>文件自动校验、自动修复、头文件自动整理、依赖文件自动生成。</span></a></h3><p>我们使用<a href="https://github.com/pre-commit/pre-commit" target="_blank" rel="noopener noreferrer">pre-commit</a>来实现挂载。</p><p>安装<code>pre-commit</code>。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>编写<code>pre-commit</code>的配置文件<code>.pre-commit-config.yaml</code>。</p><div class="language-yml line-numbers-mode" data-ext="yml" data-title="yml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">repos</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> repo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/pycqa/isort</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    rev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5.13.2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    hooks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> isort</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> repo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/pre-commit/mirrors-autopep8</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    rev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">v2.0.4</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    hooks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> autopep8</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # autopep8 only takes one filename as argument unless the &quot;--in-place&quot; or &quot;--diff&quot; args are used</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">--max-line-length=120</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> --diff</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> repo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/PyCQA/flake8</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    rev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7.0.0</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    hooks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flake8</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">            -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> --max-line-length=120</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> repo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> local</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    hooks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> id</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto-requirements</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto requirements</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        entry</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /bin/zsh ./hooks/auto-requirements.sh</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        language</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> system</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        pass_filenames</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">        always_run</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里添加了几个<code>pre-commit</code>的钩子，分别是<code>isort</code>、<code>autopep8</code>、<code>flake8</code>、<code>auto-requirements</code>。</p><ul><li><code>isort</code>：对<code>.py</code>文件进行头文件自动整理。</li><li><code>autopep8</code>：对<code>.py</code>文件进行格式自动修复。</li><li><code>flake8</code>：对<code>.py</code>文件进行格式校验。</li><li><code>auto-requirements</code>：在<code>git commit</code>时自动生成依赖文件。</li></ul>`,18)),i("p",null,[s[1]||(s[1]=a("只有")),s[2]||(s[2]=i("code",null,"auto-requirements",-1)),s[3]||(s[3]=a("是我们自定义的，其他都是比较常用的三方库。如何自定义可以参考")),l(n,{to:"/article/yukb34ys.html"},{default:h(()=>s[0]||(s[0]=[a("Python项目如何优雅的生成依赖文件")])),_:1})]),s[13]||(s[13]=t(`<p><strong>提示</strong> 这里我们在<code>.pre-commit-config.yaml</code>中只添加一些基础的设置，更多设置等着我们去探索。</p><p><strong>注意</strong> <code>.pre-commit-config.yaml</code>文件里面的配置有一个细节，我们是先设置<code>autopep8</code>帮我们修复错误，再使用<code>flake8</code>去校验。这个顺序重要吗？</p><p>添加<code>pre commit</code>到<code>git</code>钩子中</p><p>执行如下命令：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .git/hooks/pre-commit</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>添加完之后，我们看一下<code>.git/hooks</code>下面的内容：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ll</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">total</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 128</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   478B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> applypatch-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   896B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   4.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fsmonitor-watchman.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   189B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> post-update.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   424B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-applypatch.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   632B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 13:46</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   416B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-merge-commit.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.3K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-push.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   4.8K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-rebase.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   544B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-receive.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   1.5K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> prepare-commit-msg.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   2.7K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push-to-checkout.sample</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-rwxr-xr-x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> matias</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  staff</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   3.6K</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Jan</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 18:13</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update.sample</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看出，对比之前多了一个<code>pre-commit</code>文件，我们看看里面的内容：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">       </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/usr/bin/env bash</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># File generated by pre-commit: https://pre-commit.com</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ID: 138fd403232d2ddd5efb44317e38bf03</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># start templated</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">INSTALL_PYTHON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/Users/matias/.pyenv/versions/3.8.10/bin/python3.8</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ARGS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hook-impl</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> --config</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.pre-commit-config.yaml</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> --hook-type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">pre-commit</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># end templated</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HERE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dirname</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> pwd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ARGS</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">--hook-dir</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$HERE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> --</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$@</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -x</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$INSTALL_PYTHON</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exec</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$INSTALL_PYTHON</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -mpre_commit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ARGS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">elif</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> command</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exec</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ARGS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">@</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">else</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\`pre-commit\` not found.  Did you forget to activate your virtualenv?</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> 1&gt;&amp;2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这就是<code>pre-commit</code>自动生成的文件。看一下<code>ARGS=(hook-impl --config=.pre-commit-config.yaml --hook-type=pre-commit)</code>，我们就知道，<code>git commit</code>时，会执行这个文件，<code>pre-commit</code>会根据<code>.pre-commit-config.yaml</code>文件中的配置，执行相应的钩子。</p><p>如果已经添加过，但是更新了<code>.pre-commit-config.yaml</code>文件，可以直接更新。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> autoupdate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者，清除或卸载之后再添加。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clean</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uninstall</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pre-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行完上面的命令后，<code>pre commit</code>就添加到<code>git</code>钩子中了。后续执行<code>git commit</code>命令时，就会触发<code>pre commit</code>，然后自动执行我们的配置。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">quote&gt; feat: - 实现接口转发到微软必应最新背景图功能</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Installing environment </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> https://github.com/pycqa/isort.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Once installed this environment will be reused.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> This may take a few minutes...</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Installing environment </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> https://github.com/pre-commit/mirrors-autopep8.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Once installed this environment will be reused.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> This may take a few minutes...</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Installing environment </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> https://github.com/PyCQA/flake8.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> Once installed this environment will be reused.</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">INFO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> This may take a few minutes...</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">isort....................................................................Failed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hook</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> isort</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> were</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> modified</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> by</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hook</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/app/errors/app_error.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/app/errors/http_error.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/app/errors/validation_error.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/app/router/wallpaper/api.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/app/utils/time_util.py</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Fixing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /Users/matias/matias/MT/MTGithub/bingwallpaper/main.py</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">autopep8.................................................................Passed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">flake8...................................................................Passed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">auto</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requirements........................................................Failed</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hook</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> id:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> auto-requirements</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> files</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> were</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> modified</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> by</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hook</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加完成之后，提交代码时就会自动执行<code>pre-commit</code>，如果<code>pre-commit</code>校验不通过，则无法提交代码。</p><p>如上我们看到<code>isort</code>和<code>auto requirements</code>两个任务失败了，就能知道我们的头文件导入被<code>isort</code>自动调整了，依赖项更新了，但是我们没手动更新依赖项，<code>auto-requirements</code>为我们自动更新了依赖项。</p><h4 id="整理头文件" tabindex="-1"><a class="header-anchor" href="#整理头文件"><span>整理头文件</span></a></h4><p>使用<a href="https://github.com/PyCQA/isort" target="_blank" rel="noopener noreferrer">isort</a>在<code>git commit</code>时，整理头文件。</p>`,20)),i("p",null,[s[5]||(s[5]=a("更多参考：")),l(n,{to:"/article/94w8v0n3.html"},{default:h(()=>s[4]||(s[4]=[a("整理头文件")])),_:1})]),s[14]||(s[14]=i("h4",{id:"格式校验",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#格式校验"},[i("span",null,"格式校验")])],-1)),s[15]||(s[15]=i("p",null,[a("在"),i("code",null,"Python"),a("中我们可以使用"),i("code",null,"flake8"),a("来对我们的"),i("code",null,".py"),a("文件进行格式校验，可以集成在"),i("code",null,"git hooks"),a("中，通过校验后才能提交。")],-1)),i("p",null,[s[7]||(s[7]=a("更多参考：")),l(n,{to:"/article/y8faf61c.html"},{default:h(()=>s[6]||(s[6]=[a("Python 格式校验")])),_:1})]),s[16]||(s[16]=i("h4",{id:"格式自动修复",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#格式自动修复"},[i("span",null,"格式自动修复")])],-1)),s[17]||(s[17]=i("p",null,[a("在"),i("code",null,"Python"),a("中我们可以使用"),i("code",null,"autopep8"),a("来对我们的"),i("code",null,".py"),a("文件进行一些格式的自动修复，可以修复一些"),i("code",null,"flake8"),a("校验出的问题。")],-1)),i("p",null,[s[9]||(s[9]=a("更多参考：")),l(n,{to:"/article/u1og7vsz.html"},{default:h(()=>s[8]||(s[8]=[a("Python 格式自动修复")])),_:1})]),s[18]||(s[18]=i("h4",{id:"生成依赖文件",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#生成依赖文件"},[i("span",null,"生成依赖文件")])],-1)),s[19]||(s[19]=i("p",null,[a("在"),i("code",null,"Python"),a("项目中，在"),i("code",null,"git commit"),a("时自动生成依赖文件。")],-1)),i("p",null,[s[11]||(s[11]=a("更多参考：")),l(n,{to:"/article/yukb34ys.html"},{default:h(()=>s[10]||(s[10]=[a("Python项目如何优雅的生成依赖文件")])),_:1})]),s[20]||(s[20]=i("h2",{id:"参考",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#参考"},[i("span",null,"参考")])],-1)),s[21]||(s[21]=i("p",null,[i("a",{href:"https://git-scm.com/book/zh-tw/v2/Customizing-Git-Git-Hooks",target:"_blank",rel:"noopener noreferrer"},"Git Hooks")],-1))])}const c=e(r,[["render",g],["__file","yo1saav7.html.vue"]]),o=JSON.parse('{"path":"/article/yo1saav7.html","title":"git hooks","lang":"zh-CN","frontmatter":{"title":"git hooks","createTime":"2025/01/18 13:38:14","permalink":"/article/yo1saav7.html","tags":["git"],"watermark":true},"headers":[],"readingTime":{"minutes":6.7,"words":2009},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"git/hooks.md","categoryList":[{"id":"ba9f11","sort":10005,"name":"git"}],"bulletin":false}');export{c as comp,o as data};
