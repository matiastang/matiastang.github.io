import{_ as i,c as a,a as e,o as n}from"./app-CS9K37Kg.js";const t={};function l(h,s){return n(),a("div",null,s[0]||(s[0]=[e(`<p>在<code>Python</code>项目中，虚拟环境是一种隔离不同项目依赖的方式，每个项目都可以有自己的虚拟环境，这样就可以避免不同项目之间的依赖冲突。</p><p>创建<code>Python</code>虚拟环境的工具有很多，各有优缺点，如：</p><table><thead><tr><th>工具/方法</th><th>特点</th></tr></thead><tbody><tr><td>venv</td><td>内置模块，轻量高效，<code>Python 3.11</code> 创建速度更快。</td></tr><tr><td>virtualenv</td><td>更灵活的虚拟环境工具，支持更多自定义选项。</td></tr><tr><td>pyenv</td><td>版本管理神器，适配多版本快速切换。</td></tr><tr><td>conda</td><td>适合数据科学和依赖复杂项目，可轻松切换 Python 版本。</td></tr><tr><td>pip + pyproject.toml</td><td>现代化依赖管理，与 <code>Python 3.11</code> 生态完美融合。</td></tr><tr><td>PDM</td><td>新工具，支持无虚拟环境模式，开发体验更佳。</td></tr><tr><td>Docker</td><td>容器化管理，适合生产环境和隔离复杂项目。</td></tr></tbody></table><p>目前就使用过<code>pyenv</code>和<code>venv</code>。<code>venv</code>内置是特点，但是是先有对应<code>Python</code>版本的情况下，才能创建虚拟环境，本身不能做<code>Python</code>的版本管理。<code>pyenv</code>是可以管理<code>Python</code>的版本的，可以随意切换需要使用的<code>Python</code>，创建虚拟环境也挺方便的。</p><p>我们也可以把<code>pyenv</code>和<code>venv</code>结合起来，比如我之前使用<code>pyenv</code>的时候，下过几个版本的<code>Python</code>，在使用<code>venv</code>创建虚拟环境的时候，我们可以用<code>pyenv</code>下载的某个<code>Python</code>版本来创建，这样虚拟环境就使用的是指定路径的<code>Python</code>版本了。</p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><h3 id="pyenv" tabindex="-1"><a class="header-anchor" href="#pyenv"><span><code>pyenv</code></span></a></h3><h4 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h4><h5 id="pyenv-安装的python的sqlite3版本过低" tabindex="-1"><a class="header-anchor" href="#pyenv-安装的python的sqlite3版本过低"><span><code>pyenv</code> 安装的<code>Python</code>的<code>sqlite3</code>版本过低</span></a></h5><p><code>Python</code>的安装包会依赖<code>sqlite3</code>，但是<code>MacOS</code>默认的<code>sqlite3</code>版本太低了，所以我们需要安装高版本的<code>sqlite3</code>，但是安装高版本的<code>sqlite3</code>之后，<code>Python</code>的安装包找不到<code>sqlite3</code>的路径，所以我们可以在安装<code>Python</code>的时候指定<code>sqlite3</code>的路径。</p><ul><li>不需要指定 <code>sqlite3</code> 路径 <code>pyenv install 3.11.9</code></li><li>需要指定 <code>sqlite3</code> 路径 <code>LDFLAGS=&quot;-L/usr/local/opt/sqlite/lib&quot; CPPFLAGS=&quot;-I/usr/local/opt/sqlite/include&quot; pyenv install 3.11.9</code></li></ul><h3 id="venv" tabindex="-1"><a class="header-anchor" href="#venv"><span><code>venv</code></span></a></h3><p>从 <code>Python 3.3</code> 开始，标准库自带了 <code>venv</code> 模块用于创建虚拟环境。<code>venv</code> 的性能在 <code>Python 3.11</code> 中进一步提升。 <code>venv</code> 创建的虚拟环境只是一个包含独立 <code>Python</code> 解释器和相关文件的目录。如果删除虚拟环境，只需删除对应的目录即可。</p><h4 id="使用-1" tabindex="-1"><a class="header-anchor" href="#使用-1"><span>使用</span></a></h4><ol><li>创建虚拟环境</li></ol><p>直接使用当前的 <code>Python</code> 解释器创建虚拟环境。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3.11</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以指定 <code>Python</code> 解释器路径创建虚拟环境。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.pyenv/versions/3.11.9/bin/python3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里我使用了之前在<code>pyenv</code>下载的<code>Python 3.11.9</code>来创建虚拟环境。</p><ol start="2"><li>激活虚拟环境</li></ol><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Linux/macOS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> source</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv/bin/activate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Windows</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> venv</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cripts</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ctivate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看虚拟环境中的 <code>Python</code> 版本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">venv</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> $</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> python3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Python</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3.11.9</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看虚拟环境中的 <code>pip</code> 版本及依赖</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">venv</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> $</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">----------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pip</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        24.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setuptools</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65.5.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">notice</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> A new release of pip is available: 24.0 -</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> 24.3.1</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">notice</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> To update, run: pip install --upgrade pip</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更新 <code>pip</code> 版本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">venv</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> $</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --upgrade</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requirement</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> already</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> satisfied:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./venv/lib/python3.11/site-packages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (24.0)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Collecting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Using</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip-24.3.1-py3-none-any.whl.metadata</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (3.7 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">kB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Using</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip-24.3.1-py3-none-any.whl</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (1.8 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">MB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Installing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> collected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  Attempting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uninstall:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Found</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> existing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installation:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 24.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    Uninstalling</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip-24.0:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      Successfully</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uninstalled</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip-24.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Successfully</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> installed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip-24.3.1</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">venv</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> $</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pip3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Package</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Version</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">----------</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -------</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pip</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        24.3.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setuptools</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65.5.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong> 如果提示没有权限，可以加上 <code>sudo</code>。</p><ol><li>退出虚拟环境</li></ol><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> deactivate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><p><a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener noreferrer">Github pyenv</a></p>`,33)]))}const p=i(t,[["render",l],["__file","44s4vt21.html.vue"]]),k=JSON.parse('{"path":"/article/44s4vt21.html","title":"Python 创建虚拟环境","lang":"zh-CN","frontmatter":{"title":"Python 创建虚拟环境","createTime":"2025/01/16 18:34:01","permalink":"/article/44s4vt21.html","tags":["Python"],"watermark":true},"headers":[],"readingTime":{"minutes":2.93,"words":879},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"python/创建虚拟环境.md","categoryList":[{"id":"23eeeb","sort":10032,"name":"python"}],"bulletin":false}');export{p as comp,k as data};
