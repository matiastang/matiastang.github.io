import{_ as s,c as t,a,o as i}from"./app-CS9K37Kg.js";const l={};function n(d,e){return i(),t("div",null,e[0]||(e[0]=[a(`<p>FULLTEXT 索引是 MySQL 提供的**全文搜索（Full-Text Search, FTS）技术，用于高效搜索大文本字段（TEXT、VARCHAR 等）**中的内容。它比 <code>LIKE &#39;%keyword%&#39;</code> 性能更好，适用于搜索引擎、文章内容查询等场景。</p><h2 id="fulltext-索引支持的存储引擎" tabindex="-1"><a class="header-anchor" href="#fulltext-索引支持的存储引擎"><span>FULLTEXT 索引支持的存储引擎</span></a></h2><ul><li>InnoDB（MySQL 5.6+） ✅ 推荐</li><li>MyISAM（老版本）</li><li>不支持 MEMORY、NDB、CSV 等引擎</li></ul><h2 id="fulltext-适用的字段" tabindex="-1"><a class="header-anchor" href="#fulltext-适用的字段"><span>FULLTEXT 适用的字段</span></a></h2><ul><li>TEXT</li><li>VARCHAR</li><li>CHAR</li><li>不适用于 INT、DATE、JSON 等</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>CREATE TABLE articles (</span></span>
<span class="line"><span>    id INT AUTO_INCREMENT PRIMARY KEY,</span></span>
<span class="line"><span>    title VARCHAR(255),</span></span>
<span class="line"><span>    content TEXT,</span></span>
<span class="line"><span>    FULLTEXT(title, content)  -- 创建全文索引</span></span>
<span class="line"><span>);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="如何使用-fulltext-进行搜索" tabindex="-1"><a class="header-anchor" href="#如何使用-fulltext-进行搜索"><span>如何使用 FULLTEXT 进行搜索？</span></a></h2><p>使用 <code>MATCH() ... AGAINST()</code> 进行全文搜索</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles </span></span>
<span class="line"><span>WHERE MATCH(title, content) AGAINST(&#39;MySQL&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>MATCH()：指定索引的列</li><li>AGAINST(&#39;关键词&#39;)：搜索关键词</li></ul><h2 id="fulltext-搜索模式" tabindex="-1"><a class="header-anchor" href="#fulltext-搜索模式"><span>FULLTEXT 搜索模式</span></a></h2><p>(1) NATURAL LANGUAGE MODE（默认模式）</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles </span></span>
<span class="line"><span>WHERE MATCH(title, content) AGAINST(&#39;MySQL&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>自动进行词根分析（running ≈ run）。</li><li>忽略 “stop words”（如 the, is, and）。</li><li>默认按 相关性（relevance）排序。</li></ul><p>(2) BOOLEAN MODE（布尔模式）</p><ul><li>支持 +（必须包含）、-（不能包含）、*（通配符）等高级搜索。</li><li>不忽略 “stop words”，更适合精准搜索。</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles </span></span>
<span class="line"><span>WHERE MATCH(title, content) AGAINST(&#39;+MySQL -Oracle&#39; IN BOOLEAN MODE);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>+MySQL → 结果必须包含 MySQL</li><li>-Oracle → 结果不能包含 Oracle</li><li>Database* → 匹配 Database, Databases（通配符）</li></ul><p>(3) WITH QUERY EXPANSION（查询扩展模式）</p><p>适用于模糊搜索，基于 MySQL 统计自动扩展搜索词。</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles </span></span>
<span class="line"><span>WHERE MATCH(title, content) AGAINST(&#39;MySQL&#39; WITH QUERY EXPANSION);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>先搜索 MySQL，然后自动扩展搜索相关内容。</li></ul><h2 id="fulltext-vs-like" tabindex="-1"><a class="header-anchor" href="#fulltext-vs-like"><span>FULLTEXT vs LIKE</span></a></h2><table><thead><tr><th>对比项</th><th>FULLTEXT</th><th><code>LIKE ‘%keyword%’</code></th></tr></thead><tbody><tr><td>性能</td><td>快（索引）✅</td><td>慢（全表扫描）❌</td></tr><tr><td>支持大数据</td><td>支持 ✅</td><td>效率低 ❌</td></tr><tr><td>模糊搜索</td><td>部分支持（BOOLEAN MODE）</td><td>全部匹配</td></tr><tr><td>多关键字</td><td>支持 ✅</td><td>仅匹配字符串</td></tr><tr><td>排序方式</td><td>按相关性排序</td><td>无排序</td></tr><tr><td>适用场景</td><td>搜索文章、日志、聊天记录</td><td>简单字符串匹配</td></tr></tbody></table><p>FULLTEXT适用于：搜索文章、评论、日志等大文本数据。 FULLTEXT不适用于：精确匹配（如 <code>WHERE username = &#39;John&#39;</code>）。</p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><ol><li>创建、删除 FULLTEXT 索引</li></ol><p>创建 FULLTEXT 索引</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>CREATE FULLTEXT INDEX idx_fulltext ON articles(title, content);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>删除 FULLTEXT 索引</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>ALTER TABLE articles DROP INDEX idx_fulltext;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ALTER TABLE 添加 FULLTEXT</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>ALTER TABLE articles ADD FULLTEXT(title, content);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>FULLTEXT 限制</p><p>不能用于 <code>=</code>, <code>LIKE</code>，只能用于 <code>MATCH() ... AGAINST()</code></p><p>这样不行</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles WHERE content = &#39;MySQL&#39;;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样才行</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT * FROM articles WHERE MATCH(content) AGAINST(&#39;MySQL&#39;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>InnoDB 只支持 UTF8MB4 或 UTF8</li></ol><p>确保字符集正确：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>ALTER TABLE articles CONVERT TO CHARACTER SET utf8mb4;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>默认最小单词长度为 4（可修改）</li></ol><p>MySQL 默认忽略 3 个字符以下的搜索词（如 SQL）。</p><p>修改 ft_min_word_len：</p><div class="language-conf line-numbers-mode" data-ext="conf" data-title="conf"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[mysqld]</span></span>
<span class="line"><span>ft_min_word_len=3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>重启 MySQL，并重建索引：</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>REPAIR TABLE articles QUICK;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="4"><li>FULLTEXT 索引仅适用于 MySQL</li></ol><ul><li>MySQL：✅ FULLTEXT</li><li>PostgreSQL：✅ tsvector</li><li>MongoDB：✅ Text Index</li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><table><thead><tr><th>功能</th><th>描述</th></tr></thead><tbody><tr><td>适用于</td><td>大文本搜索（TEXT, VARCHAR）</td></tr><tr><td>存储引擎</td><td>InnoDB, MyISAM</td></tr><tr><td>查询方式</td><td>MATCH() ... AGAINST()</td></tr><tr><td>搜索模式</td><td>NATURAL LANGUAGE, BOOLEAN, WITH QUERY EXPANSION</td></tr><tr><td>性能</td><td>远快于 LIKE &#39;%keyword%&#39;</td></tr><tr><td>索引限制</td><td>只适用于全文搜索，最小单词长度 4</td></tr></tbody></table>`,52)]))}const c=s(l,[["render",n],["__file","8ygpicdc.html.vue"]]),p=JSON.parse('{"path":"/mysql/8ygpicdc.html","title":"FULLTEXT 索引","lang":"zh-CN","frontmatter":{"title":"FULLTEXT 索引","createTime":"2025/02/26 11:23:51","permalink":"/mysql/8ygpicdc.html","watermark":true},"headers":[],"readingTime":{"minutes":2.53,"words":759},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/mysql/FULLTEXT索引.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"984dc3","sort":10047,"name":"mysql"}],"bulletin":false}');export{c as comp,p as data};
