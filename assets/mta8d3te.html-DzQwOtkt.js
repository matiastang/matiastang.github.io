import{_ as i,c as a,a as n,o as l}from"./app-CS9K37Kg.js";const h={};function e(k,s){return l(),a("div",null,s[0]||(s[0]=[n(`<p>ApacheBench（ab） 是一个常用的 Web 服务器性能测试工具，由 Apache 基金会提供，主要用于衡量 Web 服务器的吞吐量和响应时间。它可以模拟多个并发请求，帮助开发人员评估 Web 服务器在不同负载条件下的性能表现。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>在 MacOS 上，可以使用 Homebrew 安装 ApacheBench：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brew</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apache2-utils</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>其实 <code>MacOS</code> 自带了 <code>ApacheBench</code>。使用<code>ab -V</code>命令查看版本信息：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -V</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><p>ApacheBench 只需一条命令即可对目标网站进行压力测试，无需复杂的配置。</p><h3 id="参数说明" tabindex="-1"><a class="header-anchor" href="#参数说明"><span>参数说明</span></a></h3><p>我们可以通过帮助命令进行查看参数。如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --help</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ab:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wrong</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> arguments</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Usage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [options] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">http</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">://</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hostname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">:port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/path</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Options</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> are:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> perform</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -c</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  Number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> multiple</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> at</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timelimit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> max.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spend</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> on</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> benchmarking</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> implies</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timeout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Seconds</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> max.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> each</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> response</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 30</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> windowsize</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Size</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TCP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> send/receive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> buffer,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      Address</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bind</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> when</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> making</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> outgoing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connections</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -p</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> postfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     File</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POST.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Remember</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> also</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> putfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      File</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> containing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PUT.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Remember</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> also</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> content-type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Content-type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POST/PUT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    &#39;application/x-www-form-urlencoded&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">text/plain</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> verbosity</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    How</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> much</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> troubleshooting</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> info</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> print</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -w</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Print</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> results</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tables</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> instead</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GET</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -y</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -z</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   String</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> insert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> as</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> td</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> or</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> th</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cookie,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Apache=1234</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (repeatable)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -H</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Arbitrary</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> line,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eg.</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Accept-Encoding: gzip</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    Inserted</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> after</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> normal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lines.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (repeatable)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -A</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Basic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WWW</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Authentication,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> colon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> separated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> password.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -P</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attribute</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    Add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Basic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Proxy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Authentication,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> attributes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                    are</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> colon</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> separated</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> username</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> password.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -X</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> proxy:port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Proxyserver</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -V</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Print</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> number</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Use</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HTTP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KeepAlive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> feature</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -d</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> percentiles</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> table.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -S</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> confidence</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> estimators</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> warnings.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -q</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Do</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> not</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> progress</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> when</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> doing</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> more</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> than</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 150</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -l</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Accept</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> variable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> length</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (use </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dynamic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pages</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -g</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filename</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> collected</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> data</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gnuplot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> format</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -e</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filename</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     Output</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CSV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> percentages</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">              Don</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">t exit on socket receive errors.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -m method       Method name</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -h              Display usage information (this message)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -I              Disable TLS Server Name Indication (SNI) extension</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -Z ciphersuite  Specify SSL/TLS cipher suite (See openssl ciphers)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -f protocol     Specify SSL/TLS protocol</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                    (TLS1, TLS1.1, TLS1.2 or ALL)</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    -E certfile     Specify optional client certificate chain and private key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>-A auth-username:password 向服务器提供 BASIC 身份验证凭据。用户名和密码由单个分隔并通过:base64 编码发送。无论服务器是否需要，都会发送该字符串（即，已发送需要的 401 身份验证）。</li><li>-b windowsize TCP 发送/接收缓冲区的大小，以字节为单位。</li><li>-B local-address 进行传出连接时要绑定到的地址。</li><li>-c concurrency 一次执行的多个请求的数量。默认为一次一个请求。</li><li>-C cookie-name=value Cookie:在请求中添加一行。参数通常采用对的形式 。该字段是可重复的。name=value</li><li>-d 不显示“XX [ms] 表内提供的百分比”。（遗留支持）。</li><li>-e csv-file 编写一个逗号分隔值 (CSV) 文件，其中包含为每个百分比（从 1% 到 100%）提供服务该百分比请求所花费的时间（以毫秒为单位）。这通常比“gnuplot”文件更有用；因为结果已经“装箱”了。</li><li>-E client-certificate-file 连接到 SSL 网站时，使用提供的 PEM 格式的客户端证书向服务器进行身份验证。该文件应包含客户端证书、中间证书和私钥。在 2.4.36 及更高版本中可用。</li><li>-f protocol 指定 SSL/TLS 协议（SSL2、SSL3、TLS1、TLS1.1、TLS1.2 或 ALL）。TLS1.1 和 TLS1.2 支持在 2.4.4 及更高版本中可用。</li><li>-g gnuplot-file 将所有测量值写为“gnuplot”或 TSV（制表符分隔值）文件。这个文件可以很容易地导入到Gnuplot、IDL、Mathematica、Igor 甚至 Excel 等包中。标签位于文件的第一行。</li><li>-h 显示使用信息。</li><li>-H custom-header 将额外的标头附加到请求中。参数通常采用有效标题行的形式，包含以冒号分隔的字段值对（即,&quot;Accept-Encoding: zip/zop;8bit&quot;）。</li><li>-i 做HEAD请求而不是GET.3.3 输出</li><li>-k 启用 HTTP KeepAlive 功能，即在一个 HTTP 会话中执行多个请求。默认为没有 KeepAlive。</li><li>-l 如果响应的长度不是恒定的，则不要报告错误。这对动态页面很有用。在 2.4.7 及更高版本中可用。</li><li>-m HTTP-method 请求的自定义 HTTP 方法。在 2.4.10 及更高版本中可用。</li><li>-n requests 为基准测试会话执行的请求数。默认是只执行一个请求，这通常会导致不具代表性的基准测试结果。</li><li>-p POST-file 包含要 POST 的数据的文件。记得还要设置<code>-T &#39;application/x-www-form-urlencoded&#39;</code> 这个参数</li><li>-P proxy-auth-username:password 向代理途中提供 BASIC 身份验证凭据。用户名和密码由单个分隔并通过:base64 编码发送。无论代理是否需要，都会发送字符串（即，已经发送了需要的 407 代理身份验证）。</li><li>-q 当处理超过 150 个请求时，每 10% 或 100 个左右的请求ab输出一个进度计数stderr。该 -q标志将抑制这些消息。</li><li>-r 不要在套接字接收错误时退出。</li><li>-s timeout 套接字超时前等待的最大秒数。默认值为 30 秒。在 2.4.4 及更高版本中可用。</li><li>-S 不显示中值和标准差值，当平均值和中值相差超过标准差的一倍或两倍时，也不显示警告/错误消息。并默认为min/avg/max 值。（遗留支持）。</li><li>-t timelimit 用于基准测试的最大秒数。这意味着 -n 50000内部。使用它在固定的总时间内对服务器进行基准测试。默认情况下没有时间限制。</li><li>-T content-type 用于 POST/PUT 数据的内容类型标头，例如。 application/x-www-form-urlencoded. 默认为text/plain。</li><li>-u PUT-file 包含要 PUT 的数据的文件。记得还要设置-T.</li><li>-v verbosity 设置详细级别 -4及以上打印标题信息，3以上打印响应代码（404、200 等）， 2以上打印警告和信息。</li><li>-V 显示版本号并退出。</li><li>-w 在 HTML 表格中打印结果。默认表格为两列宽，背景为白色。 <code>-x &lt;table&gt;-attributes</code> 用作属性的字符串<code>&lt;table&gt;</code>。插入属性 <code>&lt;table here &gt;</code><code>-X proxy[:port]</code> 对请求使用代理服务器。 <code>-y &lt;tr&gt;-attributes</code> 用作属性的字符串<code>&lt;tr&gt;</code>。 <code>-z &lt;td&gt;-attributes</code> 用作属性的字符串<code>&lt;td&gt;</code>。 <code>-Z ciphersuite</code> 指定 SSL/TLS 密码套件（请参阅 openssl 密码）</li></ul><p><strong>提示</strong> 最常用的还是<code>-n</code>和<code>-c</code>参数，<code>-n</code>表示总请求数，<code>-c</code>表示并发数。</p><h3 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://localhost:8000/test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>-t 60：测试持续时间为60秒</li><li>-c 100：并发请求数为100</li></ul><p><strong>注意</strong> 测试接口时不能写<code>localhost</code>需要写<code>127.0.0.1</code></p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>-t 60：测试持续时间为60秒</li><li>-c 100：并发请求数为100</li></ul><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 50</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>-n 1000：总请求数 1000 个</li><li>-c 50：并发请求数 50 个</li></ul><h3 id="测试gunicorn启动的fastapi服务" tabindex="-1"><a class="header-anchor" href="#测试gunicorn启动的fastapi服务"><span>测试gunicorn启动的Fastapi服务</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apr_socket_recv:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Operation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (60)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17013</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> completed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>出现当测试到一定量的时候报<code>apr_socket_recv: Operation timed out (60)</code>的错误。查了一下是每个请求占用一个端口，这样，当请求到达一定量的时候，端口就耗尽了。可以使用<code>-k</code>参数来启用<code>HTTP KeepAlive</code>功能。<a href="https://stackoverflow.com/questions/30352725/why-is-my-hello-world-go-server-getting-crushed-by-apachebench" target="_blank" rel="noopener noreferrer">stackoverflow apr_socket_recv: Operation timed out (60)</a></p><p>启用<code>HTTP KeepAlive</code>功能</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apr_socket_recv:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Operation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (60)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 17908</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> completed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用了<code>-k</code>还是没用。<code>ab --hlpe</code>查看了一下参数。发现可以使用<code>-f</code>指定协议。于是尝试执行协议，结果如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TLS1.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apr_socket_recv:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Operation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (60)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19380</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> completed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加参数<code>-v 3</code>打印出响应代码，如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TLS1.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;Hello tdy time: 1712630567.21209 cpu count: 8&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LOG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Response</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> code</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LOG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> received:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTTP/1.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OK</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">date:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Tue,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 09</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apr</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2024</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 02:42:46</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> GMT</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">server:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> uvicorn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">content-length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 48</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">content-type:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/json</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">x-process-time:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0.0004010200500488281</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&quot;Hello tdy time: 1712630567.213013 cpu count: 8&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">LOG:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Response</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> code</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 200</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apr_socket_recv:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Operation</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> timed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> out</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (60)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 18786</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> completed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调小参数测试</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TLS1.1</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Finished</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16329</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        uvicorn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hostname:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            8000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      10</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   14.896</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      16329</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        5515</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Receive:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 5515,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Exceptions:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Keep-Alive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      3464938</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       786811</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1096.20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       9.122</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.912</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          227.16</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Times</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">              min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mean[+/-sd]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> median</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      32</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Processing:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     136</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Waiting:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4.4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     130</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     136</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Percentage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> within</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  50%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      4</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  66%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  75%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  80%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  90%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      8</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  95%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  98%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     17</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  99%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     25</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 100%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    136</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (longest </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">request</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Complete requests: 16329</code>表示完成请求16329，<code>Failed requests: 5515</code>表示失败的请求5515。</p><p>再次<code>gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:server -b 0.0.0.0:8000</code>启动，然后测试一次，发现失败的没有了。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Finished</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 16328</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        uvicorn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hostname:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            8000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      10</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15.643</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      16328</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Keep-Alive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      2721122</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       65312</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1043.81</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       9.580</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.958</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          169.88</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Times</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">              min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mean[+/-sd]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> median</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      29</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Processing:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      97</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Waiting:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   3.6</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      4</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      97</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   4.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     101</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Percentage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> within</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  50%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  66%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  75%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      6</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  80%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      6</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  90%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      7</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  95%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  98%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     19</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  99%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     27</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 100%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    101</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (longest </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">request</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调整并发数再测试</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 30</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Finished</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9602</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        uvicorn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hostname:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            8000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      30</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      9602</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Keep-Alive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1596016</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       38420</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1920.38</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       15.622</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.521</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          311.72</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Times</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">              min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mean[+/-sd]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> median</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   0.3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      24</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Processing:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   15</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   9.6</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     13</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      92</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Waiting:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   12</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   8.3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     10</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      82</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   16</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   9.6</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     13</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      92</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Percentage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> within</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  50%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     13</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  66%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  75%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     16</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  80%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     18</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  90%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     25</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  95%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     37</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  98%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     48</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  99%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     54</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 100%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     92</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (longest </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">request</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="测试uvicorn启动的fastapi服务" tabindex="-1"><a class="header-anchor" href="#测试uvicorn启动的fastapi服务"><span>测试uvicorn启动的Fastapi服务</span></a></h3><p>服务还是使用的和上面一样的服务，但是启动方式不同</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 60</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://127.0.0.1:8000/test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">This</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> is</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ApacheBench,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Version</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2.3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$Revision</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1879490</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> $</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Copyright</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1996</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Adam</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Twiss,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Zeus</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Technology</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ltd,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.zeustech.net/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Licensed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> The</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Apache</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Foundation,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://www.apache.org/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Benchmarking</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (be </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">patient</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 15000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 25000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Completed</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 30000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Finished</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 32769</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Software:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        uvicorn</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Hostname:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Port:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            8000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Path:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          /test</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Document</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        11</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      100</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   60.633</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      32769</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5702283</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       360459</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    540.45</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       185.031</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       1.850</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          91.84</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connection</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Times</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">              min</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mean[+/-sd]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> median</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   65</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1012.2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   19516</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Processing:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   85</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  38.1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     72</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     350</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Waiting:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   81</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  37.2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     69</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     347</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  150</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1012.0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     73</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   19640</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Percentage</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> served</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> within</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certain</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> time</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (ms)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  50%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     73</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  66%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     79</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  75%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     89</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  80%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     92</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  90%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    109</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  95%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    141</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  98%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    273</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  99%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    303</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 100%</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  19640</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (longest </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">request</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="对比" tabindex="-1"><a class="header-anchor" href="#对比"><span>对比</span></a></h2><p>gunicorn启动的Fastapi服务</p><p><code>ab -k -t 10 -c 10</code>测试结果</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      10</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   14.896</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      16329</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        5515</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">   (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Connect:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Receive:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 0,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Length:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 5515,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Exceptions:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Keep-Alive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      3464938</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       786811</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1096.20</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       9.122</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.912</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          227.16</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ab -k -t 5 -c 30</code>测试结果</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      30</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   5.000</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      9602</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Keep-Alive</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1596016</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       38420</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    1920.38</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       15.622</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       0.521</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          311.72</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>uvicorn启动的Fastapi服务</p><p><code>ab -t 60 -c 100</code>测试结果</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Concurrency</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Level:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      100</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> taken</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> for</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   60.633</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> seconds</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Complete</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      32769</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Failed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Total</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5702283</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HTML</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> transferred:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       360459</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Requests</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> second:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    540.45</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [#/sec] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       185.031</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Time</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> per</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> request:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">       1.850</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ms] (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mean,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> across</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> concurrent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Transfer</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rate:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          91.84</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [Kbytes/sec] received</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>请求总数（Complete requests）</li><li>失败的请求数（Failed requests）</li><li>每秒请求数（Requests per second, rps）</li><li>平均请求处理时间（Time per request）</li><li>最长和最短的响应时间（Min/Max response time）</li><li>传输速率（Transfer rate）</li></ul><p>从<code>每秒请求</code>和<code>平均请求处理时间</code>来看gunicorn启动的服务要好一点儿。</p><h2 id="gunicorn参数说明" tabindex="-1"><a class="header-anchor" href="#gunicorn参数说明"><span>gunicorn参数说明</span></a></h2><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gunicorn</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --help</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">             </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">usage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gunicorn</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [OPTIONS] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">APP_MODULE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">options:</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -h,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --help</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> this</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> help</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> message</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> exit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -v,</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         show</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> program</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s version number and exit</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -c CONFIG, --config CONFIG</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        :ref:\`The Gunicorn config file&lt;configuration_file&gt;\`. [./gunicorn.conf.py]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -b ADDRESS, --bind ADDRESS</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The socket to bind. [[</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">127.0.0.1:8000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">]]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --backlog INT         The maximum number of pending connections. [2048]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -w INT, --workers INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The number of worker processes for handling requests. [1]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -k STRING, --worker-class STRING</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The type of workers to use. [sync]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --threads INT         The number of worker threads for handling requests. [1]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --worker-connections INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The maximum number of simultaneous clients. [1000]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --max-requests INT    The maximum number of requests a worker will process before restarting. [0]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --max-requests-jitter INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The maximum jitter to add to the *max_requests* setting. [0]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -t INT, --timeout INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Workers silent for more than this many seconds are killed and restarted. [30]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --graceful-timeout INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Timeout for graceful workers restart. [30]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --keep-alive INT      The number of seconds to wait for requests on a Keep-Alive connection. [2]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --limit-request-line INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The maximum size of HTTP request line in bytes. [4094]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --limit-request-fields INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Limit the number of HTTP headers fields in a request. [100]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --limit-request-field_size INT</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Limit the allowed size of an HTTP request header field. [8190]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --reload              Restart workers when code changes. [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --reload-engine STRING</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        The implementation that should be used to power :ref:\`reload\`. [auto]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --reload-extra-file FILES</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Extends :ref:\`reload\` option to also watch and reload on additional files [[]]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --spew                Install a trace function that spews every line executed by the server. [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --check-config        Check the configuration and exit. The exit status is 0 if the [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --print-config        Print the configuration settings as fully resolved. Implies :ref:\`check-config\`.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --preload             Load application code before the worker processes are forked. [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --no-sendfile         Disables the use of \`\`sendfile()\`\`. [None]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --reuse-port          Set the \`\`SO_REUSEPORT\`\` flag on the listening socket. [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --chdir CHDIR         Change directory to specified directory before loading apps.</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        [/Users/matias/matias/MT/MTGithub/learing/mt-fastapi]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -D, --daemon          Daemonize the Gunicorn process. [False]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -e ENV, --env ENV     Set environment variables in the execution environment. [[]]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -p FILE, --pid FILE   A filename to use for the PID file. [None]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --worker-tmp-dir DIR  A directory to use for the worker heartbeat temporary file. [None]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -u USER, --user USER  Switch worker processes to run as this user. [501]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -g GROUP, --group GROUP</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Switch worker process to run as this group. [20]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  -m INT, --umask INT   A bit mask for the file mode on files written by Gunicorn. [0]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --initgroups          If true, set the worker process</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> access</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> with</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> all</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --forwarded-allow-ips</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> STRING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Front-end</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;s IPs from which allowed to handle set secure headers. [127.0.0.1]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --access-logfile FILE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The Access log file to write to. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --disable-redirect-access-to-syslog</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Disable redirect access logs to syslog. [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --access-logformat STRING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The access log format. [%(h)s %(l)s %(u)s %(t)s &quot;%(r)s&quot; %(s)s %(b)s &quot;%(f)s&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        &quot;%(a)s&quot;]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --error-logfile FILE, --log-file FILE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The Error log file to write to. [-]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-level LEVEL     The granularity of Error log outputs. [info]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --capture-output      Redirect stdout/stderr to specified file in :ref:\`errorlog\`. [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --logger-class STRING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The logger you want to use to log events in Gunicorn. [gunicorn.glogging.Logger]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-config FILE     The log config file to use. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-config-json FILE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The log config to read config from a JSON file [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-syslog-to SYSLOG_ADDR</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Address to send syslog messages. [unix:///var/run/syslog]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-syslog          Send *Gunicorn* logs to syslog. [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-syslog-prefix SYSLOG_PREFIX</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Makes Gunicorn use the parameter as program-name in the syslog entries. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --log-syslog-facility SYSLOG_FACILITY</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Syslog facility name [user]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -R, --enable-stdio-inheritance</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Enable stdio inheritance. [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --statsd-host STATSD_ADDR</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        The address of the StatsD server to log to. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --dogstatsd-tags DOGSTATSD_TAGS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        A comma-delimited list of datadog statsd (dogstatsd) tags to append to []</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --statsd-prefix STATSD_PREFIX</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Prefix to use when emitting statsd metrics (a trailing \`\`.\`\` is added, []</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  -n STRING, --name STRING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        A base to use with setproctitle for process naming. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --pythonpath STRING   A comma-separated list of directories to add to the Python path. [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --paste STRING, --paster STRING</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Load a PasteDeploy config file. The argument may contain a \`\`#\`\` [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --proxy-protocol      Enable detect PROXY protocol (PROXY mode). [False]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --proxy-allow-from PROXY_ALLOW_IPS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Front-end&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IPs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> from</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> which</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> allowed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> accept</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> proxy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> requests</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (comma </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">separate</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">).</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                        [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">127.0.0.1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --keyfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        SSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> key</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --certfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       SSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certificate</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --ssl-version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SSL_VERSION</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        SSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (see </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stdlib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ssl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s). [_SSLMethod.PROTOCOL_TLS]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --cert-reqs CERT_REQS</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Whether client certificate is required (see stdlib ssl module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                        [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">VerifyMode.CERT_NONE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --ca-certs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> FILE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       CA</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> certificates</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --suppress-ragged-eofs</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Suppress</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ragged</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> EOFs</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (see </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">stdlib</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ssl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s) [True]</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  --do-handshake-on-connect</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                        Whether to perform SSL handshake on socket connect (see stdlib ssl module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">s</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">                        [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">False</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --ciphers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CIPHERS</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     SSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Cipher</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> suite</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> use,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> format</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> of</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> an</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> OpenSSL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cipher</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [None]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --paste-global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CONF</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   Set</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PasteDeploy</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> variable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> \`\`</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">value</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`\`</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> form.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [[]]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  --strip-header-spaces</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">                        Strip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> spaces</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> present</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> between</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> \`\`</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">\`\`</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [False]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-py line-numbers-mode" data-ext="py" data-title="py"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># gunicorn.conf</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># coding:utf-8</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> multiprocessing</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 并行工作进程数, int，cpu数量*2+1 推荐进程数</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">workers </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> multiprocessing</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cpu_count</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 指定每个进程开启的线程数</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">threads </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 绑定的ip与端口</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">bind </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">0.0.0.0:5000</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置守护进程,将进程交给supervisor管理</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">daemon </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">false</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 工作模式协程，默认的是sync模式</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">worker_class </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gevent</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置最大并发量（每个worker处理请求的工作线程数，正整数，默认为1）</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">worker_connections </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 最大客户端并发数量，默认情况下这个值为1000。此设置将影响gevent和eventlet工作模式</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_requests </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置进程文件目录</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pidfile </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/your_path/gunicorn.pid</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置访问日志和错误信息日志路径</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">accesslog </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/your_path/gunicorn_acess.log</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">errorlog </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/your_path/gunicorn_error.log</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 日志级别，这个日志级别指的是错误日志的级别，而访问日志的级别无法设置</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">loglevel </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">info</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置gunicorn访问日志格式，错误日志无法设置</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">access_log_format </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%(t)s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %(p)s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %(h)s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> &quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%(r)s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot; </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%(s)s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %(L)s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %(b)s</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> %(f)s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot; &quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">%(a)s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 监听队列</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">backlog </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 512</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#进程名</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">proc_name </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">gunicorn_process</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">   </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置超时时间120s，默认为30s。按自己的需求进行设置timeout = 120</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">timeout </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 120</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 超时重启</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">graceful_timeout </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 300</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在keep-alive连接上等待请求的秒数，默认情况下值为2。一般设定在1~5秒之间。</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">keepalive </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># HTTP请求行的最大大小，此参数用于限制HTTP请求行的允许大小，默认情况下，这个值为4094。</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 值是0~8190的数字。此参数可以防止任何DDOS攻击</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">limit_request_line </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5120</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 限制HTTP请求中请求头字段的数量。</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#  此字段用于限制请求头字段的数量以防止DDOS攻击，与limit-request-field-size一起使用可以提高安全性。</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 默认情况下，这个值为100，这个值不能超过32768</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">limit_request_fields </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 101</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 限制HTTP请求中请求头的大小，默认情况下这个值为8190。</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 值是一个整数或者0，当该值为0时，表示将对请求头大小不做限制</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">limit_request_field_size </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8190</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 设置gunicorn使用的python虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pythonpath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/home/your_path/venv/bin/python3</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 环境变量</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">raw_env </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">APE_API_ENV=DEV</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="优缺点" tabindex="-1"><a class="header-anchor" href="#优缺点"><span>优缺点</span></a></h2><h3 id="apachebench-ab-适用场景" tabindex="-1"><a class="header-anchor" href="#apachebench-ab-适用场景"><span>ApacheBench（ab）适用场景</span></a></h3><ul><li>Web 服务器性能测试（如 Nginx、Apache、Tomcat）</li><li>API 接口负载测试</li><li>静态资源访问速度测试</li><li>网站优化前后的对比测试</li><li>网络带宽评估</li></ul><h3 id="优点" tabindex="-1"><a class="header-anchor" href="#优点"><span>优点</span></a></h3><ul><li>最明显的优点就是简单易用，只需一行命令即可执行压力测试</li><li>支持post请求，接受json文件作为参数 （方便编写脚本批量测试）</li></ul><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点"><span>缺点</span></a></h3><ul><li>ab 的并发连接数限制为 1024，对于高并发场景，ab 无法满足需求，主要是ab只能利用单个cpu，只能是单进程，而系统限制每个进程打开的最大文件数为1024，所以最多1024个线程，如果是多核cpu，就浪费了这些资源。适用于中小规模测试，若需要大规模压测，建议使用 JMeter 或 k6。</li><li>ab 运行在单个机器上，无法模拟大规模的分布式压力测试。</li><li>只能发送简单的 HTTP 请求，无法模拟复杂的用户交互（如登录、跳转、表单提交等）。</li><li>不支持 WebSocket 或 HTTP/2。仅支持 HTTP/1.0 和 HTTP/1.1，无法用于测试现代协议。</li><li>无法持续时间压测，控制速度压测。ab没有这个功能。</li><li>如果中途的请求被服务器拒绝了，测试报告不完整，无法得出已完成请求的压测情况，如上面示例中超时一样，不会给出报告。</li></ul><p><strong>注意</strong> 如果你需要更多复杂的压力测试需求，建议使用更高级的工具如 JMeter、wrk、k6、Gatling。</p><h2 id="对比wrk" tabindex="-1"><a class="header-anchor" href="#对比wrk"><span>对比wrk</span></a></h2><p>ab 其典型用法如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ab</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -k</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://domain/path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>一个很容易被忽视的参数是<code>-k</code>，它会增加请求头 Connection: Keep-Alive，相当于开启了 HTTP 长连接，这样做一方面可以降低测试服务器动态端口被耗尽的风险，另一方面也有助于给目标服务器更大的压力，测试出更接近极限的结果。</p><p>wrk 相对于 ab 来说最大的优点是它支持多线程，这样更容易发挥多核 CPU 的能力，从而更容易测试出系统的极限能力，其典型用法如下：</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wrk</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://domain/path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>wrk 没有类似参数 <code>-k</code>这样打开 HTTP 长链接的选项，这是因为 wrk 使用的是 HTTP/1.1，缺省开启的是长连接，而 ab 使用的是 HTTP/1.0，缺省开启的是短链接。</p><p>如何用 wrk 测试短链接？</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> wrk</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -H</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Connection: Close</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 100</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://domain/path</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>也就是说通过参数<code>-H</code>传递一个自定义的 Connection 请求头来关闭长链接。此外 wrk 也支持自定义脚本编程。</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><p><a href="https://www.apache.org" target="_blank" rel="noopener noreferrer">ApacheBench</a></p>`,74)]))}const p=i(h,[["render",e],["__file","mta8d3te.html.vue"]]),d=JSON.parse('{"path":"/back/mta8d3te.html","title":"ApacheBench 性能测试","lang":"zh-CN","frontmatter":{"title":"ApacheBench 性能测试","createTime":"2025/01/21 10:11:04","permalink":"/back/mta8d3te.html","watermark":true},"headers":[],"readingTime":{"minutes":18.03,"words":5409},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/back/ApacheBench性能测试.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"7b2314","sort":10019,"name":"back"}],"bulletin":false}');export{p as comp,d as data};
