import{_ as a,c as s,b as t,o as c}from"./app-CS9K37Kg.js";const i={};function r(n,e){return c(),s("div",null,e[0]||(e[0]=[t("h1",{id:"setstate",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#setstate"},[t("span",null,"setState")])],-1),t("p",null,"React 中 setState 什么时候是同步的，什么时候是异步的？ 在React中，如果是由React引发的事件处理（比如通过onClick引发的事件处理），调用setState不会同步更新this.state，除此之外的setState调用会同步执行this.state。所谓“除此之外”，指的是绕过React通过addEventListener直接添加的事件处理函数，还有通过setTimeout/setInterval产生的异步调用。",-1),t("p",null,"原因：在React的setState函数实现中，会根据一个变量isBatchingUpdates判断是直接更新this.state还是放到队列中回头再说，而isBatchingUpdates默认是false，也就表示setState会同步更新this.state，但是，有一个函数batchedUpdates，这个函数会把isBatchingUpdates修改为true，而当React在调用事件处理函数之前就会调用这个batchedUpdates，造成的后果，就是由React控制的事件处理过程setState不会同步更新this.state。",-1)]))}const l=a(i,[["render",r],["__file","d5e8fyec.html.vue"]]),d=JSON.parse('{"path":"/article/d5e8fyec.html","title":"setState","lang":"zh-CN","frontmatter":{"title":"setState","createTime":"2025/01/21 15:12:36","permalink":"/article/d5e8fyec.html","watermark":true},"headers":[],"readingTime":{"minutes":0.86,"words":259},"git":{"updatedTime":1755670488000,"contributors":[{"name":"唐道勇","username":"唐道勇","email":"matias@tangdaoyongdeMacBook-Pro.local","commits":1,"avatar":"https://avatars.githubusercontent.com/唐道勇?v=4","url":"https://github.com/唐道勇"}]},"filePathRelative":"notes/react/setState.md","categoryList":[{"id":"4358b5","sort":10000,"name":"notes"},{"id":"0231cd","sort":10031,"name":"react"}],"bulletin":false}');export{l as comp,d as data};
